#!/usr/bin/env zsh

# Prefix history search on ↑/↓ (robust: terminfo + both keymaps)
autoload -Uz up-line-or-beginning-search down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search

zmodload zsh/terminfo 2>/dev/null

# Bind using terminfo when available
if [[ -n ${terminfo[kcuu1]} ]]; then
  bindkey -M emacs  "${terminfo[kcuu1]}" up-line-or-beginning-search
  bindkey -M emacs  "${terminfo[kcud1]}" down-line-or-beginning-search
  bindkey -M viins  "${terminfo[kcuu1]}" up-line-or-beginning-search
  bindkey -M viins  "${terminfo[kcud1]}" down-line-or-beginning-search
fi
